DONE

    Sketch out design for one socket and umem per-NIC queue

    And then setup with two NIC queues.

    Manually poll them once per-frame (for now...)

    What's the next step?

    Some options:

        1. Implement packet sending across multiple queues (scatter...)

        2. Copy packets from the receive queue into the receive buffer (seems wrong approach though...)

        3. Move packet receives to multiple threads, and separate out the management of frames for fill/receive vs. send/complete so there is not contention

        4. Move packet sends to multiple threads (but then the question is how to wake up the send packet threads to do work?)

TODO

    I think that implementing receive packets across multiple threads, and working out what core to pin those threads to is an important step. 

    What needs to be done to implement receive packets across multiple threads?

    First I think we need a receive buffer per-socket, double buffered with a pointer to the current receive buffer.

    The sync point happens with main thread (receive packets) and the main thread flips that atomic ptr to the other one, and then does the regular receive on the main.

    Start here, it's complex enough to be interesting.



















    -------------

    Implement rate limiting in XDP x requests per-y seconds keyed on IP address

    -------------

    Fix the connect token so we never send the user hash over un-encrypted channels

    This involves doing key exchange and switching over to more advanced crypto primitive

    Add these primitives to proton and then upgrade the code in protect to do the key exchange at the same time as processing the connect token

    -------------

    Implement ip2location in client backend

    -------------

    Implement the client ping near relay design

    -------------

    Implement requesting a route and sending packets across it

    -------------

    Double this route and implement multipath

    -------------
